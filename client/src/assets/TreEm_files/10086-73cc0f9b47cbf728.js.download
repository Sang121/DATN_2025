"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10086],{10086:function(e,n,t){t.d(n,{Z:function(){return se}});var o=t(54300),r=t(24364),a=t(21151),i=t(17599),c=t(17538),s=t(74674),l=t(24246),u=t(90583),d=t(23842),p=t(85034),h=t(35230),g=t.n(h),f=t(27378),v=t(61403),m=t.n(v),x=t(90104),b=t.n(x),y=t(99729),_=t.n(y),w=t(61270),C=864e5,k=function(e){(0,c.Z)(t,e);var n=(0,s.Z)(t);function t(){var e;(0,r.Z)(this,t),e=n.apply(this,arguments),(0,i.Z)((0,o.Z)(e),"timeout",null),(0,i.Z)((0,o.Z)(e),"timeoutToastBottom",null),(0,i.Z)((0,o.Z)(e),"COUPON_DELIVERY",null),(0,i.Z)((0,o.Z)(e),"COUPON_IN_LOCALSTORAGE",null),(0,i.Z)((0,o.Z)(e),"state",{isOpen:!1,coupon:{},applied:!1,replace:!1,toastOpen:!1,toastMessage:"",showButtonRemoveCoupon:!1}),(0,i.Z)((0,o.Z)(e),"showModal",(function(){e.setState({isOpen:!0})})),(0,i.Z)((0,o.Z)(e),"closeModal",(function(){e.setState({isOpen:!1})})),(0,i.Z)((0,o.Z)(e),"showToast",(function(){e.setState({toastOpen:!0})})),(0,i.Z)((0,o.Z)(e),"closeToast",(function(){e.setState({toastOpen:!1})}));var a=(0,o.Z)(e);(0,i.Z)((0,o.Z)(e),"getCouponInfo",function(){var e=(0,d.Z)(g().mark((function e(n){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,w.F)({url:"v2/gum-delivery/coupon?ruleId=".concat(n)});case 3:t=e.sent,a.setState({coupon:t.data.data}),t.data.data.expiredAt-+new Date<=0||a.showModal(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()),(0,i.Z)((0,o.Z)(e),"renderDate",(function(e){var n=new Date(e),t=n.getDate(),o=n.getMonth()+1,r=n.getFullYear();return"".concat(t<10?"0".concat(t):t,"/").concat(o<10?"0".concat(o):o,"/").concat(r)})),(0,i.Z)((0,o.Z)(e),"validateCoupon",(function(){e.state.coupon.expiredAt-+new Date<=0?(e.closeModal(),e.setState({toastMessage:'M\xe3 gi\u1ea3m gi\xe1 "'.concat(e.state.coupon.couponCode,'" \u0111\xe3 h\u1ebft h\u1ea1n s\u1eed d\u1ee5ng')},e.showToast),e.timeoutToastBottom=setTimeout((function(){e.closeToast()}),5e3)):e.COUPON_IN_LOCALSTORAGE&&e.COUPON_IN_LOCALSTORAGE.couponCode!==e.state.coupon.couponCode?e.setState({replace:!0}):e.applyCoupon()})),(0,i.Z)((0,o.Z)(e),"applyCoupon",(function(){b()(e.state.coupon)||window.localStorage.setItem("COUPON_DELIVERY",JSON.stringify(e.state.coupon)),e.setState({applied:!0},(function(){e.timeout=setTimeout((function(){e.setState({applied:!1})}),3e3)})),e.closeModal()})),(0,i.Z)((0,o.Z)(e),"renderTime",(function(){var n=e.state.coupon.expiredAt-+new Date;return n>=C?"24 gi\u1edd":n<36e5?"".concat(Math.round(n/1e3/60)," ph\xfat"):"".concat(Math.round(n/1e3/60/60)," gi\u1edd")})),(0,i.Z)((0,o.Z)(e),"renderPrevCouponCode",(function(){return b()(e.COUPON_IN_LOCALSTORAGE)?null:e.COUPON_IN_LOCALSTORAGE.couponCode||""})),(0,i.Z)((0,o.Z)(e),"renderCurrentCouponCode",(function(){return e.state.coupon.couponCode||""})),(0,i.Z)((0,o.Z)(e),"checkExpiredInClient",(function(){b()(e.COUPON_IN_LOCALSTORAGE)||e.COUPON_IN_LOCALSTORAGE.expiredAt-+new Date<=0&&e.removeCouponInStorage()})),(0,i.Z)((0,o.Z)(e),"removeCouponInStorage",(function(){window.localStorage.removeItem("COUPON_DELIVERY")}));var c=(0,o.Z)(e);return(0,i.Z)((0,o.Z)(e),"applyCouponInCart",(0,d.Z)(g().mark((function e(){var n,t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b()(c.COUPON_IN_LOCALSTORAGE)){e.next=15;break}return e.prev=1,e.next=4,(0,w.F)({url:"v2/carts/mine/coupons/".concat(c.COUPON_IN_LOCALSTORAGE.couponCode),method:"PUT"});case 4:c.removeCouponInStorage(),c.refreshPage(),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(1),n=_()(e.t0,"responseJSON.error.message","C\xf3 l\u1ed7i x\u1ea3y ra"),502===(t=_()(e.t0,"responseJSON.error.code",0))?c.removeCouponInStorage():99===t&&(n='M\xe3 gi\u1ea3m gi\xe1 "'.concat(c.COUPON_IN_LOCALSTORAGE.couponCode,'" \u0111\xe3 h\u1ebft h\u1ea1n s\u1eed d\u1ee5ng'),c.removeCouponInStorage()),c.setState({showButtonRemoveCoupon:501===t,toastMessage:n},c.showToast),c.timeoutToastBottom=setTimeout(c.closeToast,5e3);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})))),(0,i.Z)((0,o.Z)(e),"refreshPage",(function(){window.location.reload()})),e}return(0,a.Z)(t,[{key:"getValueQueryString",value:function(e){if(1!==window.location.href.indexOf("?")){var n=window.location.href.split("?")[1];if(n&&n.length){if(-1===n.indexOf("&")){var t=n.split("=");return t[0]===e?t[1]:null}var o=n.split("&");return(o=o.map((function(e){var n=e.split("=");return(0,i.Z)({},n[0],n[1])})).reduce((function(e,n){return(0,p.Z)({},e,n)}),{}))[e]||null}return null}}},{key:"componentDidMount",value:function(){this.COUPON_DELIVERY=window.localStorage.getItem("COUPON_DELIVERY"),this.COUPON_IN_LOCALSTORAGE=b()(this.COUPON_DELIVERY)?null:JSON.parse(this.COUPON_DELIVERY);var e=this.getValueQueryString("promoId"),n="/checkout/cart"===window.location.pathname;this.checkExpiredInClient(),n||e&&e.length&&this.getCouponInfo(e)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),this.timeoutToastBottom&&clearTimeout(this.timeoutToastBottom)}},{key:"render",value:function(){var e=this.state,n=e.isOpen,t=e.coupon,o=e.applied,r=e.replace,a=e.toastOpen,i=e.toastMessage,c=e.showButtonRemoveCoupon;return b()(t)?null:(0,l.jsxs)("div",{children:[(0,l.jsx)(m(),{shouldCloseOnOverlayClick:!1,isOpen:n,onRequestClose:this.closeModal,style:{content:{overflow:"visible",padding:0,width:"400px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9999}},children:r?(0,l.jsxs)("div",{className:"coupon-delivery-confirm","data-view-id":"coupon_delivery",children:[(0,l.jsx)("div",{className:"coupon-delivery-confirm__title",children:"Th\xf4ng tin \u01b0u \u0111\xe3i"}),(0,l.jsxs)("div",{className:"coupon-delivery-confirm__content",children:['M\xe3 gi\u1ea3m gi\xe1 "',this.renderCurrentCouponCode(),'" s\u1ebd \u0111\u01b0\u1ee3c thay th\u1ebf cho m\xe3 "',this.renderPrevCouponCode(),'" \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u tr\u01b0\u1edbc \u0111\xf3 v\xe0 t\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng v\xe0o gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n khi tho\u1ea3 \u0111i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng.']}),(0,l.jsxs)("div",{className:"coupon-delivery-confirm__buttons",children:[(0,l.jsx)("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery-confirm__cancel",onClick:this.closeModal,children:"B\u1ecf Qua"}),(0,l.jsx)("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery-confirm__replace",onClick:this.applyCoupon,children:"\u0110\u1ed3ng \xdd"})]})]}):(0,l.jsxs)("div",{className:"coupon-delivery",children:[(0,l.jsx)("button",{className:"coupon-delivery__close",onClick:this.closeModal,children:"\xd7"}),(0,l.jsx)("div",{className:"coupon-delivery__note",children:"B\u1ea1n \u0111\u01b0\u1ee3c t\u1eb7ng 1 m\xe3 gi\u1ea3m gi\xe1"}),(0,l.jsx)("div",{className:"coupon-delivery__coupon",children:t.couponCode}),(0,l.jsxs)("div",{className:"coupon-delivery__content",children:[t.description,(0,l.jsxs)("div",{style:{marginTop:8},children:["H\u1ea1n s\u1eed d\u1ee5ng: ",this.renderDate(t.expiredAt),"."]})]}),(0,l.jsx)("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery__button",onClick:this.validateCoupon,children:"\xc1P D\u1ee4NG M\xc3"})]})}),(0,l.jsxs)("div",{className:"coupon-delivery-toast ".concat(o?"coupon-delivery-toast--open":""),children:[(0,l.jsx)("img",{src:"https://salt.tikicdn.com/ts/upload/92/fa/9c/8adbbc5c9f9d81d3d77681f29c5b49d1.png",alt:"icon",className:"coupon-delivery-toast__icon"}),"Trong v\xf2ng ",this.renderTime(),", m\xe3 gi\u1ea3m gi\xe1 s\u1ebd \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng v\xe0o gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n khi tho\u1ea3 \u0111i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng"]}),(0,l.jsxs)("div",{className:"coupon-delivery-toast-bottom ".concat(a?"coupon-delivery-toast-bottom--open":""),children:[(0,l.jsx)("div",{className:"coupon-delivery-toast-bottom__content",children:i}),c&&(0,l.jsx)("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery-toast-bottom__button",onClick:this.removeCouponInStorage,children:"H\u1ee7y"})]}),(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n.coupon-delivery {\npadding: 24px;\nbackground-image:\nurl(https://salt.tikicdn.com/ts/upload/e3/e8/69/e414774fae5f790c26664ce780cb690e.png), url(https://salt.tikicdn.com/ts/upload/51/dd/24/c276ae585e8335620aebb4acf8769507.png);\nbackground-size: 32px 32px, 255px 69px;\nbackground-repeat: no-repeat, no-repeat;\nbackground-position: left bottom, right top;\n}\n\n.coupon-delivery__close {\nwidth: 32px;\nheight: 32px;\nbackground: #fff;\ncolor:#242424;\nfont-size: 20px;\ntext-align: center;\nline-height: 32px;\nposition: absolute;\nright: -16px;\ntop: -16px;\nz-index: 9999;\nborder-radius: 50%;\nborder: 0;\npadding: 0;\n}\n.coupon-delivery__note {\nfont-size: 15px;\nfont-weight: 500;\nline-height: 1.6;\ncolor: #ff3776;\ntext-transform: uppercase;\nmargin: 0 0 12px;\n}\n.coupon-delivery__coupon {\nfont-size: 32px;\nline-height: 40px;\nfont-weight: 500;\ncolor: #242424;\nmargin: 0 0 12px;\ntext-transform: uppercase;\n}\n.coupon-delivery__content {\nfont-size: 15px;\nline-height: 24px;\nmargin: 0 0 24px;\n}\n.coupon-delivery__button {\nheight: 40px;\nbackground-color: #0d5cb6;\ntext-align: center;\nborder: 0;\npadding: 0;\nfont-size: 15px;\nline-height: 40px;\ncolor: #fff;\nfont-weight: 500;\nwidth: 100%;\nborder-radius: 4px;\ncursor: pointer;\n}\n\n.coupon-delivery-toast {\nposition: fixed;\nz-index: 9999;\nwidth: 280px;\nborder-radius: 16px;\nbackground-color: rgba(0, 0, 0, 0.87);\nleft: 50%;\ntop: 50%;\ntransform: translate(-50%, -50%) scale(0.7);\ncolor: #fff;\ntext-align: center;\nfont-size: 13px;\nline-height: 20px;\npadding: 16px;\nuser-select: none;\ntransition-duration: 0.3s;\nvisibility: hidden;\nopacity: 0;\n}\n\n.coupon-delivery-toast--open {\nvisibility: visible;\nopacity: 1;\ntransform: translate(-50%, -50%) scale(1);\n}\n\n.coupon-delivery-toast__icon {\nwidth: 40px;\nheight: 40px;\nmargin: 0 auto 8px;\ndisplay: block;\n}\n\n.coupon-delivery-confirm {\npadding: 24px;\n}\n.coupon-delivery-confirm__title {\nfont-size: 20px;\nline-height: 28px;\nfont-weight: 500;\nmargin: 0 0 12px;\n}\n\n.coupon-delivery-confirm__content {\nfont-size: 15px;\nline-height: 24px;\nmargin: 0 0 24px;\n}\n\n.coupon-delivery-confirm__buttons {\ndisplay: flex;\njustify-content: space-between;\n}\n\n.coupon-delivery-confirm__cancel {\nwidth: 170px;\nheight: 40px;\nborder-radius: 4px;\nborder: 1px solid #0d5cb6;\ncolor: #0d5cb6;\ntext-align: center;\nfont-size: 15px;\nline-height: 40px;\nfont-weight: 500;\n}\n\n.coupon-delivery-confirm__replace{\nfont-size: 15px;\nline-height: 40px;\nfont-weight: 500;\nwidth: 170px;\nheight: 40px;\nborder-radius: 4px;\ncolor: #fff;\nbackground-color: #0d5cb6;\ntext-align: center;\nborder: 0;\n}\n\n.coupon-delivery-toast-bottom {\nposition: fixed;\nz-index: 9999;\nborder-radius: 8px;\nbackground-color: rgba(0, 0, 0, 0.87);\nleft: 50%;\nbottom: 32px;\ncolor: #fff;\nfont-size: 13px;\nline-height: 20px;\npadding: 16px;\nuser-select: none;\ntransition-delay: 0.2s;\ntransition-duration: 0.5s;\nvisibility: hidden;\nopacity: 0;\ntransform: translate(-50%, 0) rotateX(-90deg);\ntransform-origin: bottom center;\ndisplay: flex;\nmax-width: 400px;\n}\n\n.coupon-delivery-toast-bottom--open {\nvisibility: visible;\nopacity: 1;\ntransform: translate(-50%, -50%) rotateX(0deg);\n}\n\n.coupon-delivery-toast-bottom__content {\nflex: 1;\n}\n\n.coupon-delivery-toast-bottom__button {\nbackground:0;\nfont-size: 13px;\nline-height: 20px;\ncolor: #1ba8ff;\nborder: 0;\npadding: 10px 0 10px 12px;\ntext-transform: uppercase;\noutline: 0;\n}\n"}})]})}}]),t}(f.Component),O=k,Z=t(45827),N=t(88866),T=t(43552),P=t(99930),S=t(56141),I=t.n(S),j=t(65218),M=t.n(j),L=t(88038),R=t.n(L),E=t(86677),A=t(8504),z=t.n(A),U=t(37254),D=t(73805),G=t(30647),F=t(79503),H=t(35989),V=t(8315),B=t(88180),q=t(53606),J=t(17119),K=t(67943),X=t(27378),Y=T.Router,Q=M()((function(){return Promise.all([t.e(22883),t.e(49660)]).then(t.bind(t,14140))}),{loadableGenerated:{webpack:function(){return[14140]}},ssr:!1,loading:function(){return null}}),$=M()((function(){return Promise.all([t.e(47528),t.e(99158),t.e(59095),t.e(91266),t.e(64978)]).then(t.bind(t,28392))}),{loadableGenerated:{webpack:function(){return[28392]}},ssr:!1,loading:function(){return null}}),W=M()((function(){return Promise.all([t.e(57969),t.e(94960),t.e(47202),t.e(373)]).then(t.bind(t,90758))}),{loadableGenerated:{webpack:function(){return[90758]}},ssr:!0,loading:function(){return(0,l.jsx)("div",{style:{height:96,backgroundColor:N.O9.white}})}}),ee=M()((function(){return t.e(35031).then(t.bind(t,93250))}),{loadableGenerated:{webpack:function(){return[93250]}},ssr:!1,loading:function(){return null}}),ne=M()((function(){return Promise.all([t.e(96014),t.e(91868),t.e(64149)]).then(t.bind(t,90875))}),{loadableGenerated:{webpack:function(){return[90875]}},ssr:!1,loading:function(){return null}}),te=M()((function(){return Promise.all([t.e(49937),t.e(32196),t.e(4838)]).then(t.bind(t,11448))}),{loadableGenerated:{webpack:function(){return[11448]}},ssr:!1,loading:function(){return null}}),oe=M()((function(){return t.e(68497).then(t.bind(t,62836))}),{loadableGenerated:{webpack:function(){return[62836]}},ssr:!1,loading:function(){return null}}),re=M()((function(){return Promise.all([t.e(42221),t.e(64433),t.e(10688),t.e(87046)]).then(t.bind(t,10688))}),{loadableGenerated:{webpack:function(){return[10688]}},ssr:!0,loading:function(){return null}}),ae=M()((function(){return Promise.all([t.e(88033),t.e(57775),t.e(77460),t.e(44249),t.e(31457)]).then(t.bind(t,18072))}),{loadableGenerated:{webpack:function(){return[18072]}},ssr:!1,loading:function(){return null}}),ie=M()((function(){return t.e(99651).then(t.bind(t,12876))}),{loadableGenerated:{webpack:function(){return[12876]}},ssr:!1,loading:function(){return null}}),ce=function(e){(0,c.Z)(t,e);var n=(0,s.Z)(t);function t(e){var a;return(0,r.Z)(this,t),a=n.call(this,e),(0,i.Z)((0,o.Z)(a),"handleProcessBar",(function(){Y.onRouteChangeStart=function(e){z().start()},Y.onRouteChangeComplete=function(e){var n;z().done();var t=(null===(n=a.props)||void 0===n?void 0:n.customer)||{},o=t.email,r=t.id;o&&r&&((0,B.yV)({email:o,id:r}),(0,P.bj)(r)),(0,B.pp)(),(0,D.dy)(),a.props.handleCartNotification(!1)},Y.onRouteChangeError=function(e,n){z().done()}})),(0,i.Z)((0,o.Z)(a),"renderHeader",(function(){switch(a.props.layout){case"reward-hub":default:return(0,l.jsx)(W,{isRevamp:!0});case"header-empty":return null}})),(0,F.OC)(),a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(e){this.handleProcessBar();var n=this.props.router;(0,V.allowLayoutFetchFeaturedKeywords)(n)&&this.props.fetchHeaderKeywords(!1,(0,V.getFeaturedKeywordParams)(n))}},{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.login,o=n.customer,r=n.router;I()(e.customer,o)||(t&&(0,G.R)(o),(0,F.Eb)()&&this.props.handleUserPhoneModal());(0,V.allowLayoutFetchFeaturedKeywords)(r)&&(e.router.route===r.route&&I()(e.router.query,r.query)||this.props.fetchHeaderKeywords(!1,(0,V.getFeaturedKeywordParams)(r)))}},{key:"render",value:function(){var e,n=this.props,t=n.children,o=n.className,r=n.locationModal,a=n.loginModal,i=n.userPhoneModal,c=n.forgotPasswordModal,s=n.logPageView,u=n.otpModal,d=n.useReferrer,p=n.extraFooter,h=n.hiddenFooter,g=n.mainStyle,f=void 0===g?{}:g,v=n.customHead,m=n.router,x=n.floatyIconEnable,b=n.pageName,y=n.addToCartModal,_=n.sdkConfig,w=(0,F.XH)();return(0,l.jsxs)("div",{className:o,children:[(0,l.jsx)(H.qy,{}),(0,l.jsxs)(R(),{children:[(0,l.jsx)("title",{children:"Mua H\xe0ng Tr\u1ef1c Tuy\u1ebfn Uy T\xedn v\u1edbi Gi\xe1 R\u1ebb H\u01a1n t\u1ea1i Tiki.vn"}),(0,l.jsx)("meta",{name:"description",content:"Th\u1ecfa s\u1ee9c mua s\u1eafm qua m\u1ea1ng h\xe0ng ng\xe0n m\u1eb7t h\xe0ng s\xe1ch, \u0111i\u1ec7n t\u1eed, \u0111\u1ed3 gia d\u1ee5ng, qu\xe0 t\u1eb7ng, th\u1eddi trang, l\xe0m \u0111\u1eb9p & s\u1ee9c kh\u1ecfe t\u1ea1i Tiki v\u1edbi gi\xe1 r\u1ebb h\u01a1n v\xe0 khuy\u1ebfn m\xe3i h\u1ea5p d\u1eabn"}),v&&v]}),d&&(0,l.jsx)(Z.Z,{}),this.renderHeader(),(0,l.jsx)("main",{style:f,children:t}),!h&&(0,l.jsx)(re,{extraFooter:p}),r.visible&&(0,l.jsx)(te,{}),a.visible&&(0,l.jsx)(Q,{}),i.visible&&(0,l.jsx)(Q,{hasToVerify:!0}),u.visible&&(0,l.jsx)(ee,{}),c.visible&&(0,l.jsx)(ne,{}),m.query.flashSwap&&"1"===m.query.flashSwap&&!w&&(0,l.jsx)(ae,{isOpen:!0,mode:m.query.mode||"tab"}),(0,l.jsxs)(q.Z,{children:[(0,l.jsx)(oe,{logPageView:s,customer:this.props.customer,router:this.props.router,route:this.props.router?this.props.router.route:void 0,sdkConfig:_}),(0,l.jsx)(O,{})]}),x&&(0,l.jsx)(ie,{pageName:b}),(null===y||void 0===y||null===(e=y.response)||void 0===e?void 0:e.visible)&&(0,l.jsx)($,{})]})}}]),t}(X.Component);var se=(0,U.$j)((function(e){var n,t,o,r;return{build_version:e.desktop.layout.build_version,login:e.desktop.app.login,customer:e.desktop.app.customer,locationModal:e.desktop.layout.locationModal,loginModal:e.desktop.layout.loginModal,userPhoneModal:e.desktop.layout.userPhoneModal,forgotPasswordModal:e.desktop.layout.forgotPasswordModal,logPageView:e.desktop.layout.logPageView,otpModal:e.desktop.layout.otpModal,deliveryZone:(0,J.Fd)(),addToCartModal:(0,K.TN)(e),sdkConfig:null!==(r=null===(n=e.desktop)||void 0===n||null===(t=n.app)||void 0===t||null===(o=t.webConfig)||void 0===o?void 0:o.sdkConfig)&&void 0!==r?r:{}}}),{fetchHeaderKeywords:u.jq,handleUserPhoneModal:u.n7,handleCartNotification:u.$G})((0,E.withRouter)(ce))},99930:function(e,n,t){t.d(n,{bj:function(){return c},iH:function(){return i}});var o=t(99729),r=t.n(o),a=t(81112);t(93496);var i=function(e,n,t){var o,i,c,s=e.viewId,l=e.viewLabel,u=e.viewContent,d=e.viewHierarchy,p=e.viewIndex,h=e.sectionIndex,g=t?null===t||void 0===t||null===(o=t.target)||void 0===o?void 0:o.getBoundingClientRect():null;n((c={view_type:(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.nodeName)||"dom",view_id:s,view_label:l,index:{item:p,section:h},view_hierarchy:d,frame:{width:r()(g,"width",0),height:r()(g,"height",0),x:r()(g,"x",0),y:r()(g,"y",0)},content:u},{type:a.tZ,payload:c}))},c=function(e){window.TK_CUSTOMER_ID=e}},93496:function(e,n,t){t.d(n,{I1:function(){return r}});t(99729);var o=t(8315),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,o.isValidObject)(e);return n?JSON.stringify({click_data:e}):null}},17119:function(e,n,t){t.d(n,{Fd:function(){return m},KP:function(){return x},nN:function(){return b},sw:function(){return g},xL:function(){return v}});var o=t(23842),r=t(5341),a=t(35230),i=t.n(a),c=t(99729),s=t.n(c),l=t(91902),u=t.n(l),d=t(15721),p=t(61270),h="delivery_zone",g="delivery-zone",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,t){return navigator.geolocation.getCurrentPosition(n,t,e)}))},v=function(e){var n=e.replace(/Qu\u1eadn/g,"Q.");return n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/qu\u1eadn/g,"Q.")).replace(/Ph\u01b0\u1eddng/g,"P.")).replace(/ph\u01b0\u1eddng/g,"P.")).replace(/Th\xe0nh Ph\u1ed1/g,"TP.")).replace(/Th\xe0nh ph\u1ed1/g,"TP.")).replace(/Th\u1ecb x\xe3/g,"TX.")).replace(/X\xe3/g,"X.")).replace(/x\xe3/g,"X.")).replace(/Th\u1ecb tr\u1ea5n/g,"TT.")).replace(/Huy\u1ec7n/g,"H.")},m=function(){try{var e=localStorage.getItem(g);if(!e)return null;var n=JSON.parse(e),t=d.Z.get(h);return s()(n,"data.delivery_zone")===t&&parseInt((new(u())).format("X"))-s()(n,"create_at",0)<=3600?n:(d.Z.remove(h),localStorage.removeItem(g),null)}catch(o){return null}},x=function(){var e=(0,o.Z)(i().mark((function e(n){var t,o,a,c,l,u,f,v,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m()){e.next=28;break}if(o=void 0,a=void 0,!n){e.next=15;break}return e.t0=r.Z,e.next=10,(0,p.F)([{url:"/v2/me/delivery_zone",method:"get"},{url:"/v2/me/address?limit=10000",method:"get"}]);case 10:e.t1=e.sent,c=(0,e.t0)(e.t1,2),o=c[0],a=c[1];case 15:if(!o||!o.data){e.next=21;break}return l=o.data,t={create_at:(new Date).getTime(),data:l},localStorage.setItem(g,JSON.stringify(t)),d.Z.set(h,l.delivery_zone),e.abrupt("return",l);case 21:if(!a||!a.data){e.next=28;break}return v=(null===(u=a.data)||void 0===u||null===(f=u.data)||void 0===f?void 0:f.find((function(e){return!0===e.is_default})))||{},t={create_at:(new Date).getTime(),data:v},localStorage.setItem(g,JSON.stringify(t)),d.Z.set(h,v.delivery_zone),e.abrupt("return",v);case 28:return x=s()(t,"data"),e.abrupt("return",x);case 32:return e.prev=32,e.t2=e.catch(0),console.log("LOCATION",e.t2),e.abrupt("return",null);case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)(i().mark((function e(){var n,t,o,r,a,c,l,u,v,x=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(x.length>0&&void 0!==x[0])||x[0],t={},e.prev=2,e.next=5,(0,p.F)({url:"https://api.tiki.vn/delivery/api/v2/location-detection"});case 5:if(o=e.sent,(r=s()(o,"data.data"))&&r.delivery_zone){e.next=10;break}return console.error("Cannot detect user location."),e.abrupt("return");case 10:if(t={create_at:(new Date).getTime(),data:r},m()||(localStorage.setItem(g,JSON.stringify(t)),d.Z.set(h,r.delivery_zone)),!n||!navigator.geolocation){e.next=30;break}return e.next=16,f({enableHighAccuracy:!1});case 16:if(a=e.sent,c=s()(a,"coords.latitude"),l=s()(a,"coords.longitude"),!c||!l){e.next=30;break}return e.next=22,(0,p.F)({url:"/shopping/v1/location-detection",params:{latitude:c,longitude:l}});case 22:if(u=e.sent,(v=s()(u,"data.data"))&&v.delivery_zone){e.next=27;break}return console.error("Cannot detect user location."),e.abrupt("return");case 27:t={create_at:(new Date).getTime(),data:v},localStorage.setItem(g,JSON.stringify(t)),d.Z.set(h,v.delivery_zone);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),console.error("User automatic location error occurred",e.t0);case 35:return e.abrupt("return",t.data);case 36:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(){return e.apply(this,arguments)}}();!function(){var e=(0,o.Z)(i().mark((function e(){var n,t,o,r,a,c,l,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=24;break}return e.prev=1,e.next=4,f({enableHighAccuracy:!1});case 4:if(n=e.sent,t=s()(n,"coords.latitude"),o=s()(n,"coords.longitude"),!t||!o){e.next=17;break}return e.next=10,(0,p.F)({url:"https://api.tiki.vn/delivery/api/v2/location-detection",params:{latitude:t,longitude:o}});case 10:if(r=e.sent,(a=s()(r,"data.data"))&&a.delivery_zone){e.next=15;break}return console.error("Cannot detect user location."),e.abrupt("return");case 15:return c={create_at:(new Date).getTime(),data:a},e.abrupt("return",c.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("User automatic location error occurred",e.t0);case 22:e.next=38;break;case 24:return e.prev=24,e.next=27,(0,p.F)({url:"https://api.tiki.vn/delivery/api/v2/location-detection"});case 27:if(l=e.sent,(u=s()(l,"data.data"))&&u.delivery_zone){e.next=32;break}return console.error("Cannot detect user location."),e.abrupt("return");case 32:return d={create_at:(new Date).getTime(),data:u},e.abrupt("return",d.data);case 36:e.prev=36,e.t1=e.catch(24);case 38:case"end":return e.stop()}}),e,null,[[1,19],[24,36]])})))}()}}]);