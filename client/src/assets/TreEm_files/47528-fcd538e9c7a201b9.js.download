"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47528],{88421:function(n,e,r){r.d(e,{Z:function(){return h}});var t=r(85034),i=r(70169),o=r(19989),a=r(24246),u=r(27378),l=r(94822),c=r(5341),d=r(90104),s=r.n(d),v=r(8315),p=function(n,e){var r=null,t=null;switch(n){case 100:r=100;break;case 200:r=280;break;case 280:r=400;break;case 350:r=540;break;case 400:case 540:case 750:r=750;break;case 1080:r=1080;break;default:r=n}e&&(t=r*(e/n));return[r,t]};function f(){var n=(0,o.Z)(["\n  object-fit: contain;\n  display: block;\n"]);return f=function(){return n},n}var Z=l.default.img.withConfig({componentId:"sc-82b4dcf2-0"})(f()),m=(0,u.forwardRef)((function(n,e){var r=n.src,o=void 0===r?"":r,l=n.dimensions,d=void 0===l?[]:l,f=n.containerStyle,m=void 0===f?{}:f,h=n.onError,b=(0,u.useState)(!1),_=b[0],y=b[1],g=(0,u.useMemo)((function(){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{if(!Array.isArray(e)||s()(e))return{webpSrc1x:(0,v.convertToWebpImage)(n),src1x:n};var r=(0,c.Z)(e,3),t=r[0],i=r[1],o=r[2],a=void 0===o||o,u=(0,c.Z)(a?p(t,i):[t,i],2),l=u[0],d=u[1],f=(0,v.resizeImageHasCache)(n,l,d),Z=(0,v.convertToWebpImage)(f);return{webpSrc1x:Z,webpSrc2x:Z,src1x:f,src2x:f}}catch(m){return{}}}(o,d)}),[o]),w=g.webpSrc1x,k=g.webpSrc2x,x=g.src1x,I=g.src2x,S="";w&&k?S="".concat(w," 1x, ").concat(k," 2x"):w&&(S=w);var q="";x&&I?q="".concat(x," 1x, ").concat(I," 2x"):x&&(q=x);var C=(0,u.useCallback)((function(){h&&"function"===typeof h&&h(),y(!0)}),[h]);return(0,a.jsxs)("picture",{style:m,className:"webpimg-container",children:[!_&&(0,a.jsx)("source",{type:"image/webp",srcSet:S}),(0,a.jsx)(Z,(0,i.Z)((0,t.Z)({},n),{srcSet:q,ref:e,onError:C}))]})})),h=m},84584:function(n,e,r){r.d(e,{q:function(){return i}});var t=r(99377),i=function(n){var e=n.spId,r=n.qty,i=void 0===r?1:r;return(0,t.F)({url:"".concat("https://api.tiki.vn/raiden","/v2/best-price/products/").concat(e),params:{qty:i}})}},40582:function(n,e,r){r.d(e,{Gn:function(){return I},Ng:function(){return m},nI:function(){return x},qy:function(){return _},w1:function(){return g},yy:function(){return S}});var t=r(23842),i=r(85034),o=r(70169),a=r(35230),u=r.n(a),l=r(97954),c=r(84100),d=r(57586),s=r(99377),v=r(3649),p=r(9943),f=r(84584),Z=(0,c.Z)("".concat(p.qS,".fetchASACouponForProduct")),m=(0,v.ms)(function(){var n=(0,t.Z)(u().mark((function n(e){var r,t,i,o,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.pId,t=e.isServer,i=e.sellerId,o=e.sku,n.next=3,(0,s.F)({url:"".concat("https://api.tiki.vn","/raiden/v2/asa/seller/coupon?platform=desktop"),params:{sku:o,pid:r,seller_id:i},withCredentials:!1},t);case 3:return a=n.sent.data,n.abrupt("return",a||{});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Z),h=(0,c.Z)("".concat(p.qS,".fetchProductBundleDeal")),b=((0,v.ms)(function(){var n=(0,t.Z)(u().mark((function n(e){var r,t,i,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.mpId,t=e.sellerId,i=e.spid,console.log("spid",i),n.next=4,(0,s.F)({url:"/v2/products/widget/bundle/".concat(r,"?seller_id=").concat(t),params:{spid:i}});case 4:return o=n.sent.data,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),h),(0,c.Z)("".concat(p.qS,".fetchDeliveryZone"))),_=(0,v.ms)(function(){var n=(0,t.Z)(u().mark((function n(e){var r,t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.spId,n.next=3,(0,s.F)({url:"/v2/products/widget/delivery_info/".concat(r),params:{platform:"web",pdp:"v2"}},!1);case 3:return t=n.sent.data,n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b),y=(0,c.Z)("".concat(p.qS,".fetchSellerInfo")),g=(0,v.ms)(function(){var n=(0,t.Z)(u().mark((function n(e){var r,t,i,o,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,t=e.spId,i=e.sellerId,o=d.Z.get("_trackity"),n.next=4,(0,s.F)({url:"".concat("https://api.tiki.vn","/product-detail/v2/widgets/seller"),params:{seller_id:i,mpid:r,spid:t,trackity_id:o||null,platform:"desktop",version:3}});case 4:return a=n.sent.data,n.abrupt("return",(null===a||void 0===a?void 0:a.data)||{});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y),w=(0,c.Z)("".concat(p.qS,".fetchBestPriceInfo")),k=((0,v.ms)(function(){var n=(0,t.Z)(u().mark((function n(e){var r,t,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.spId,t=e.qty,n.next=3,(0,f.q)({spId:r,qty:t});case 3:return i=n.sent.data,n.abrupt("return",null!==i&&void 0!==i?i:{});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),w),(0,l.i5)({actionType:"".concat(p.qS,".fetchProductWidgets"),stateKey:"".concat(p.qS,".widgets"),effect:function(){var n=(0,t.Z)(u().mark((function n(e){var r,t,a,l,c,v,p,f,Z,m,h,b,_,y,g,w,k,x,I,S,q,C,D,A,L,P,E,F,R,W;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,t=e.spId,a=e.sellerId,q=d.Z.get("_trackity"),C=t?[{url:"".concat("https://api.tiki.vn","/raiden/v2/asa/seller/coupon?platform=desktop"),params:{pid:t,seller_id:a},withCredentials:!1},{url:"/v2/products/widget/bundle/".concat(r,"?seller_id=").concat(a)},{url:"".concat("https://api.tiki.vn","/product-detail/v2/widgets/seller"),params:{seller_id:a,mpid:r,spid:t,trackity_id:q||null,platform:"desktop",version:3}},{url:"/v2/products/widget/delivery_info/".concat(t),params:{platform:"web",pdp:"v2"}},{url:"".concat("https://api.tiki.vn/raiden","/v2/best-price/products/").concat(t),params:{}}]:[{},{},{},{},{},{}],n.next=6,(0,s.in)(C);case 6:return D=n.sent,A=(null===D||void 0===D||null===(l=D[0])||void 0===l||null===(c=l.value)||void 0===c||null===(v=c.data)||void 0===v?void 0:v.coupon_normal)||{},L=(null===D||void 0===D||null===(p=D[1])||void 0===p||null===(f=p.value)||void 0===f?void 0:f.data)||{},P=(null===D||void 0===D||null===(Z=D[2])||void 0===Z||null===(m=Z.value)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.data)||{},E=(null===D||void 0===D||null===(b=D[3])||void 0===b||null===(_=b.value)||void 0===_?void 0:_.data)||{},F=(null===D||void 0===D||null===(y=D[0])||void 0===y||null===(g=y.value)||void 0===g?void 0:g.data)||{},R=(null===D||void 0===D||null===(w=D[4])||void 0===w||null===(k=w.value)||void 0===k?void 0:k.data)||{},W=(null===D||void 0===D||null===(x=D[5])||void 0===x||null===(I=x.value)||void 0===I?void 0:I.data)||{},n.abrupt("return",{deliveryZone:(0,o.Z)((0,i.Z)({},E),{firstLoaded:!0}),couponData:(0,o.Z)((0,i.Z)({},A),{firstLoaded:!0}),bundleDeal:(0,o.Z)((0,i.Z)({},L),{firstLoaded:!0}),sellerWidget:(0,o.Z)((0,i.Z)({},P),{firstLoaded:!0}),isFollowedOfSeller:(null===P||void 0===P||null===(S=P.seller)||void 0===S?void 0:S.is_followed)||!1,isCalledCouponApi:!0,asaCouponData:(0,o.Z)((0,i.Z)({},F),{firstLoaded:!0}),bestPrice:R,installAppData:(0,o.Z)((0,i.Z)({},W),{firstLoaded:!0})});case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),opts:{reducers:[{action:Z,reduce:function(n,e){var r,t=e.payload;return(0,o.Z)((0,i.Z)({},n),{response:(0,o.Z)((0,i.Z)({},n.response),{asaCouponData:(0,i.Z)({},(null===(r=n.response)||void 0===r?void 0:r.asaCouponData)||{},t)})})}},{action:h,reduce:function(n,e){var r,t=e.payload;return(0,o.Z)((0,i.Z)({},n),{response:(0,o.Z)((0,i.Z)({},n.response),{bundleDeal:(0,i.Z)({},(null===(r=n.response)||void 0===r?void 0:r.bundleDeal)||{},t)})})}},{action:b,reduce:function(n,e){var r,t=e.payload;return(0,o.Z)((0,i.Z)({},n),{response:(0,o.Z)((0,i.Z)({},n.response),{deliveryZone:(0,i.Z)({},(null===(r=n.response)||void 0===r?void 0:r.deliveryZone)||{},null===t||void 0===t?void 0:t.data)})})}},{action:y,reduce:function(n,e){var r,t=e.payload;return(0,o.Z)((0,i.Z)({},n),{response:(0,o.Z)((0,i.Z)({},n.response),{sellerWidget:(0,i.Z)({},(null===(r=n.response)||void 0===r?void 0:r.sellerWidget)||{},t)})})}},{action:w,reduce:function(n,e){var r,t=e.payload;return(0,o.Z)((0,i.Z)({},n),{response:(0,o.Z)((0,i.Z)({},n.response),{bestPrice:(0,i.Z)({},null!==(r=n.response.bestPrice)&&void 0!==r?r:{},t)})})}}]}})),x=(k.action,k.hook),I=k.reducer,S=(k.exec,k.selector)},38460:function(n,e,r){r.d(e,{Dz:function(){return l},gA:function(){return f},h8:function(){return d},q8:function(){return s},rC:function(){return c},xr:function(){return p}});var t=r(85034),i=r(70169),o=r(99729),a=r.n(o),u=r(9943),l=function(n){var e,r=n.configurable_products;return(void 0===r?[]:r).find((function(n){return n.selected}))||(0,i.Z)((0,t.Z)({},n),{id:null===n||void 0===n||null===(e=n.current_seller)||void 0===e?void 0:e.product_id,images:(null===n||void 0===n?void 0:n.images)||[],seller:null===n||void 0===n?void 0:n.current_seller})},c=function(n){var e,r=a()(n,"inventory.product_virtual_type",null);return r&&null!==r?u.fY[null===r||void 0===r||null===(e=r.toUpperCase)||void 0===e?void 0:e.call(r)]:u.fY.NORMAL},d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=a()(n,"product_links")||[],r=e.filter((function(n){return!0!==n.is_installation_package}));return r};function s(n){var e=[];return n.map((function(n){e=e.concat(n.images.map((function(n){return{large_url:n.full_path,small_url:n.thumbnail,medium_url:n.full_path,isReviewImage:!0,id:null===n||void 0===n?void 0:n.id}})))})),e}var v=[u.eM.AVAILABLE,u.eM.PRE_ORDER],p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.inventory_status;if(void 0===e)return!0;var r=v.includes(e);return r},f=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.configurable_products,r=void 0===e?[]:e,o=n.current_seller;if(r.length){var a=null===r||void 0===r?void 0:r.find((function(n){return o&&n.id==o.product_id||n.selected}));if(a)return a}return(0,i.Z)((0,t.Z)({},n),{images:(null===n||void 0===n?void 0:n.images)||((null===n||void 0===n?void 0:n.thumbnail_url)?[{medium_url:null===n||void 0===n?void 0:n.thumbnail_url,large_url:null===n||void 0===n?void 0:n.thumbnail_url,small_url:null===n||void 0===n?void 0:n.thumbnail_url}]:[])})}}}]);