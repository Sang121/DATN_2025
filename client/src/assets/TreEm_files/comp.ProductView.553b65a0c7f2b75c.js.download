"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1839],{7208:function(n,t,e){e.d(t,{Z:function(){return T}});var r=e(85034),o=e(31373),a=e(24246),i=e(70169),c=e(90104),l=e.n(c),u=e(27378),s=e(83189),d=e(19989),f=e(94822);function p(){var n=(0,d.Z)(["\n  width: 100%;\n  padding-bottom: ",";\n  position: relative;\n  background: ",";\n"]);return p=function(){return n},n}function g(){var n=(0,d.Z)(["\n  opacity: ",";\n  width: 100%;\n  height: auto;\n  transition: 0.2s opacity ease;\n  object-fit: contain;\n"]);return g=function(){return n},n}function b(){var n=(0,d.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return b=function(){return n},n}function h(){var n=(0,d.Z)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    opacity: 1;\n  }\n"]);return h=function(){return n},n}function v(){var n=(0,d.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n"]);return v=function(){return n},n}var x=f.default.div.withConfig({componentId:"sc-cc821dea-0"})(p(),(function(n){var t=n.ratio;return"calc(100% * ".concat(t,")")}),(function(n){var t=n.imageIsLoaded,e=n.bg;return t?"transparent":e})),m=f.default.img.withConfig({componentId:"sc-cc821dea-1"})(g(),(function(n){return n.opacity})),y=(0,f.default)(m).withConfig({componentId:"sc-cc821dea-2"})(b()),C=f.default.a.withConfig({componentId:"sc-cc821dea-3"})(h()),S=f.default.div.withConfig({componentId:"sc-cc821dea-4"})(v(),(function(n){return n.bg})),_=(0,u.forwardRef)((function(n,t){var e=n.src,c=n.srcSet,d=n.extraSource,f=void 0===d?{}:d,p=n.alt,g=n.style,b=void 0===g?{}:g,h=n.href,v=void 0===h?"":h,_=n.ratio,w=void 0===_?null:_,k=n.dominantColor,T=void 0===k?"#EFEFEF":k,Z=n.allowFade,j=void 0===Z||Z,I=n.allowLazyLoad,E=void 0===I||I,O=n.lazyLoadProps,L=void 0===O?{}:O,M=n.loading,R=void 0!==M&&M,N=(0,o.Z)(n,["src","srcSet","extraSource","alt","style","href","ratio","dominantColor","allowFade","allowLazyLoad","lazyLoadProps","loading"]),P=(0,u.useState)((function(){return j&&E?0:1})),F=P[0],A=P[1],D=(0,u.useState)(!1),H=D[0],U=D[1];t||(t=(0,u.useRef)());var V=(0,u.useCallback)((function(){A(1),U(!0)}),[]),z=(0,u.useRef)();(0,u.useEffect)((function(){z.current&&z.current.complete&&(A(1),U(!0))}),[]);var B=(0,r.Z)({src:e,srcSet:c,alt:p,ref:z,style:b,opacity:F,onLoad:V},N),Y=R?(0,a.jsx)(S,{bg:T}):(0,a.jsxs)("picture",{children:[!l()(f)&&(0,a.jsx)("source",(0,r.Z)({},f)),(0,a.jsx)(y,(0,r.Z)({},B))]}),W=w?(0,a.jsx)(x,{imageIsLoaded:H,ratio:w,bg:T,ref:t,style:H?{}:b,children:E?(0,a.jsx)(s.Z,(0,i.Z)((0,r.Z)({offsetVertical:250,offsetHorizontal:0,debounce:!1},L),{children:Y})):Y}):(0,a.jsx)(m,(0,r.Z)({},B));return v?(0,a.jsx)(C,{href:v,"aria-label":"".concat(p,"-link"),children:W}):W})),w=e(8315),k=function(n){var t=n.src,e=(n.srcSet,n.extraSource),c=void 0===e?{}:e,l=(0,o.Z)(n,["src","srcSet","extraSource"]),s=(0,u.useState)(null),d=s[0],f=s[1],p=(0,u.useCallback)((function(n){n&&f(n)}),[]),g=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,o=t.srcSet,a=void 0===o?n:o,c=(0,u.useState)({src1x:null,extraSourceSrc1x:null}),l=c[0],s=c[1],d=l.src1x,f=l.extraSourceSrc1x,p="".concat(d," 1x"),g=(0,i.Z)((0,r.Z)({},t),{srcSet:"".concat(f," 1x")});return(0,u.useEffect)((function(){if(e){var t=e.offsetWidth;s({src1x:(0,w.resizeImageHasCache)(n,t),extraSourceSrc1x:(0,w.resizeImageHasCache)(a,t)})}}),[a,e,n]),{responsiveSrcset:p,responsiveExtraSource:g,loading:!d}}(t,c,d),b=g.responsiveSrcset,h=g.responsiveExtraSource,v=g.loading;return(0,a.jsx)(_,(0,i.Z)((0,r.Z)({},l),{src:t,srcSet:b,extraSource:h,loading:v,ref:p}))},T=function(n){var t=n.allowResponsive,e=void 0===t||t,i=(0,o.Z)(n,["allowResponsive"]);return e?(0,a.jsx)(k,(0,r.Z)({},i)):(0,a.jsx)(_,(0,r.Z)({},i))}},20617:function(n,t,e){e.r(t),e.d(t,{default:function(){return L}});var r=e(24246),o=e(98781),a=e(28870),i=e(85034),c=e(70169),l=e(79336),u=e(98710),s=e(74233),d=e(7208),f=e(56864),p=e(27378),g=e(8315),b=e(2294),h=e(77338),v=e(99729),x=e.n(v),m=e(37254),y=e(66950),C=e(91874),S=e(4215),_=e.n(S),w=e(6566),k=function(n){var t=n.product,e=n.product.name,o=void 0===e?"":e,a=n.deal_id;return(0,r.jsx)(w.Z,(0,i.Z)({data:t,config:{quantity_sold:!0}},(0,f.OE)("item","normal_deal_id_".concat(a),-1,o,null,"normal_deal_item")))},T=function(n){var t=n.layoutType,e=n.backgroundColor,o=n.showMoreButtonVisible,a=n.data,l=n.fetchMore,s=n.seeMoreLink,d=n.status,f=n.isSkeleton,p=n.limit;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.EZ,{layout:t,backgroundColor:e,showMoreButtonVisible:o,children:(0,r.jsx)(C.bu,{layout:t,children:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.isSkeleton,o=void 0!==e&&e;return o?_()(p).map((function(n){return(0,r.jsx)(y.Z,{isGrid:!0,layout:t},n)})):a.map((function(n){return(0,r.jsx)(k,(0,c.Z)((0,i.Z)({},n),{isGrid:!0,layout:t}),n.deal_id)}))}({isSkeleton:f})})}),o&&(0,r.jsx)(h.Z,{loading:d===u.Q_.REQUEST,onClick:l,href:s,children:"Xem th\xeam"})]})},Z=e(19989);function j(){var n=(0,Z.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 22px;\n  padding-top: 32px;\n  padding-bottom: 32px;\n  background: ",";\n  color: ",";\n"]);return j=function(){return n},n}var I=e(94822).default.div.withConfig({componentId:"sc-312fc8b0-0"})(j(),(function(n){return n.backgroundColor||"transparent"}),(function(n){return n.color||"black"})),E=(0,m.$j)((function(n,t){var e;return x()(n,"campaign.normalDeal.[".concat(null===t||void 0===t||null===(e=t.tabSource)||void 0===e?void 0:e.id,"-").concat(null===t||void 0===t?void 0:t.widgetId,"]"),{page:1,isLastPage:!1,data:[],status:u.Q_.INITIAL})}),{fetchNormalDeal:function(n){var t=n.payload,e=t.params;return{type:"".concat("B2_NORMAL_DEAL","_FETCH_NORMAL_DEAL"),payload:t,promise:(0,b.F)({url:"".concat("https://api.tiki.vn","/flashsale/v1/public/deals"),params:e})}}})((function(n){var t=n.generalSettings,e=n.tabSource,o=n.fetchNormalDeal,a=n.page,i=n.isLastPage,c=n.data,l=n.status,s=n.widgetId,d=n.onScreen,f=t.backgroundColor,g=t.layout,b=t.color,v=g.rowCount,x=e.seeMoreLink,m=e.tags,y=e.slug,C=e.campaignId,S=e.categoryId,_=e.type,w=e.id,k=4*v,Z=(0,p.useCallback)((function(n){var t=n.page,e={tags:m,per_page:k,page:t,type:_||"normal_deal"};C?e.campaign_id=C:y&&(e.slug=y),S&&(e.category_id=S),o({payload:{params:e,id:w,widgetId:s}})}),[o,k,m,y,C,w,s,_]),j=(0,p.useCallback)((function(){Z({page:a+1})}),[Z,a]);(0,p.useEffect)((function(){!c.length&&d&&Z({page:1})}),[Z,c.length,d]);var E=!c.length&&l===u.Q_.INITIAL;if(!c.length&&!E)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{backgroundColor:f,color:b,children:"Hi\u1ec7n t\u1ea1i kh\xf4ng c\xf2n deal n\xe0o"}),x&&(0,r.jsx)(h.Z,{href:x,children:"Xem th\xeam"})]});var O=!i||x;return(0,r.jsx)(T,{layoutType:"desktop",backgroundColor:f,showMoreButtonVisible:O,data:c,fetchMore:j,seeMoreLink:x,status:l,isSkeleton:E,limit:k})})),O=function(n){var t=n.normalDealPayload,e=n.id,o=t.backgroundColor,a=t.color,b=t.tabTitleType,h=t.type,v=t.row,x=t.tabs,m={backgroundColor:o,layout:{type:h,rowCount:v},color:a},y=(0,p.useMemo)((function(){return function(n){var t={},e=[],r=!0,o=!1,a=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;t[l.id]=l,e.push(l.id)}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return{tabsObj:t,tabsIdOrder:e}}(x)}),[x]),C=y.tabsObj,S=y.tabsIdOrder,_=(0,p.useState)(S[0]),w=_[0],k=_[1],T=(0,p.useRef)(),Z=(0,p.useState)(!0),j=Z[0],I=Z[1],O=(0,l.s4)(),L=(0,p.useRef)(),M=(0,l.RO)(L,u.sw),R=(0,p.useState)((function(){return"text"===b})),N=R[0],P=R[1],F=(0,p.useCallback)((function(n){var t=n.id,e=n.ref;return function(){k(t),e.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}}),[]);(0,p.useEffect)((function(){if(T.current){var n=T.current,t=n.offsetWidth,e=n.childNodes,r=0;e.forEach((function(n){r+=n.offsetWidth})),I(!(r<=t))}}),[S.length]);var A=C[w],D=S&&S.length>1;return A?(0,r.jsxs)(s.TZ,{children:[D&&(0,r.jsx)(s.dr,(0,c.Z)((0,i.Z)({ref:T,isVisible:O.current,isOverflow:j,backgroundColor:o},(0,f.OE)("container","normal_deal_tab_list_".concat(b),-1,"Danh s\xe1ch Tab",{type:h,row:v,tabTitleType:b},"normal_deal_tab_list")),{children:S.map((function(n,t){var e=C[n],o=w===e.id,l=(0,p.createRef)();return(0,r.jsxs)(s.E2,(0,c.Z)((0,i.Z)({ref:l,selected:o,color:a,onClick:F({id:e.id,ref:l}),tabTitleType:b},(0,f.OE)("item","normal_deal_tab_".concat(e.id),t,e.tabTitleContent,null,"normal_deal_tab_button")),{isVisible:N,children:["text"===b?(0,r.jsx)("span",{className:"tab-name",children:e.tabTitleContent}):(0,r.jsx)("div",{className:"tab-img",children:(0,r.jsx)(d.Z,{src:(0,g.resizeImageHasCache)(e.tabTitleContent,564),alt:"tab-title-img-".concat(e.id),ratio:1/3,dominantColor:"transparent",allowFade:!1,allowResponsive:!1,onLoad:function(){return 0===t&&P(!0)}})}),(0,r.jsx)("div",{className:"tab-indicator"})]}),e.id)}))})),(0,r.jsx)("div",(0,c.Z)((0,i.Z)({},(0,f.OE)("container","normal_deal_tab_".concat(w,"_container"),-1,A.tabTitleContent,null,"normal_deal_tab_item_list")),{ref:L,children:(0,r.jsx)(E,{generalSettings:m,tabSource:A,widgetId:e,onScreen:M},A.id)}))]}):null},L=function(n){var t=n.widget,e=t.payload,i=t.id;return(0,r.jsx)(a.Z,{backgroundColor:e.backgroundColor,children:(0,r.jsx)(o.Z,{children:(0,r.jsx)(O,{normalDealPayload:e,id:i})})})}},19767:function(n,t,e){e.r(t),e.d(t,{default:function(){return Z}});var r=e(24246),o=e(98781),a=e(28870),i=e(85034),c=e(70169),l=e(79336),u=e(98710),s=e(74233),d=e(7208),f=e(56864),p=e(27378),g=e(8315),b=e(92474),h=e(94606),v=e(50344),x=e.n(v),m=e(2294),y="B2_PRODUCTS",C=e(99729),S=e.n(C),_=e(37254),w=e(25074),k=(0,_.$j)((function(n,t){var e;return S()(n,"campaign.products.[".concat(null===t||void 0===t||null===(e=t.tabSource)||void 0===e?void 0:e.id,"-").concat(null===t||void 0===t?void 0:t.widgetId,"]"),{page:1,isLastPage:!1,data:[],status:u.Q_.INITIAL})}),{fetchProducts:function(n){var t=n.payload,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x(),r=t.productType,o=t.productTypeInput,a=t.limit,l=t.page_t,u=t.brand,s=t.options,d=t.nextCollectionPage,f=(0,h.Xn)(r,o,a,l,s||{}),p=f.url,g=f.params,v=f.urlType,C=v===b.Mk.COLLECTION,S=(0,i.Z)({},g);v===b.Mk.CATEGORY_BRAND&&(S.brand=g.brand||u);var _=C&&d?(0,m.F)({url:d}):(0,m.F)({baseURL:C?"https://api.tiki.vn/brickv2/api":"https://tiki.vn/api/v2",url:p,params:S});return{type:"".concat(y,"_FETCH_PRODUCTS"),params:S,payload:(0,c.Z)((0,i.Z)({},t),{isCollectionURL:C}),promise:_,callback:e}},fetchMoreProducts:function(n){var t=n.params,e=n.payload;return{type:"".concat(y,"_FETCH_MORE_PRODUCTS"),payload:e,params:t}}})((function(n){var t=n.generalSettings,e=n.tabSource,o=n.fetchProducts,a=n.fetchMoreProducts,i=n.page,c=n.isLastPage,l=n.nextCollectionPage,s=n.data,d=n.status,f=n.widgetId,g=n.onScreen,v=n.showTabsHeader,x=t.backgroundColor,m=t.layout,y=m.rowCount,C=m.type,S=e.productType,_=e.seeMoreLink,k=e.productTypeInput,T=e.brand,Z=e.id,j=e.newSSKU,I=function(n,t){switch(n){case"single":case"free":default:return 15;case"double":case"triple":return 4*t}}(C,y),E=(0,p.useMemo)((function(){return(0,h.w6)(k,!0)}),[k]).urlType,O=(0,p.useCallback)((function(n){var t=n.page;o({payload:{page_t:t,productType:S,productTypeInput:k,limit:I,id:Z,widgetId:f,brand:T,options:{tabId:Z,widgetId:f,ssku:j||[]},nextCollectionPage:l}})}),[I,S,k,T,o,Z,j,f,l]),L=(0,p.useCallback)((function(){S===b.fY.CATEGORY_SEARCH_COLLECTION||S===b.fY.NORMAL?O({page:i+1}):S!==b.fY.SSKU&&S!==b.fY.NEW_SSKU||a({params:{page:i+1,isLastPage:I*(i+1)>=s.length},payload:{id:Z,widgetId:f}})}),[s.length,O,I,i,S,a,Z,f]);(0,p.useEffect)((function(){!s.length&&g&&O({page:1})}),[s.length,g]);var M=(0,p.useMemo)((function(){return S===b.fY.SSKU||S===b.fY.NEW_SSKU||E===b.Mk.COMBO?s.slice(0,I*i):s}),[S,E,I,i,s]),R=(0,p.useMemo)((function(){return!M.length&&d===u.Q_.INITIAL}),[M,d]),N=(0,p.useMemo)((function(){if(C===b.yP.SINGLE||C===b.yP.FREE)return!1;var n=!c;return!n||S!==b.fY.SSKU&&S!==b.fY.NEW_SSKU||(n=I*i<s.length),(_||E===b.Mk.COMBO)&&(n=!0),n}),[c,S,_,E,i,I,s,C]);return M.length||R?(0,r.jsx)(w.Z,{showTabsHeader:v,layoutType:C,backgroundColor:x,showMoreButtonVisible:N,finalData:M,fetchMore:L,seeMoreLink:_,status:d,isSkeleton:R,limit:I,urlType:E,productTypeInput:k}):E===b.Mk.COMBO?(0,r.jsx)("div",{style:{fontSize:"18px",lineHeight:"20px",padding:"12px 0",textAlign:"center"},children:"Khuy\u1ebfn m\xe3i \u0111\xe3 k\u1ebft th\xfac"}):null})),T=function(n){var t=n.productPayload,e=n.id,o=t.backgroundColor,a=t.color,b=t.tabTitleType,h=t.type,v=t.row,x=t.tabs,m={backgroundColor:o,layout:{type:h,rowCount:v}},y=(0,p.useMemo)((function(){return function(n){var t={},e=[],r=!0,o=!1,a=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;t[l.id]=l,e.push(l.id)}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return{tabsObj:t,tabsIdOrder:e}}(x)}),[x]),C=y.tabsObj,S=y.tabsIdOrder,_=(0,p.useState)(S[0]),w=_[0],T=_[1],Z=(0,p.useRef)(),j=(0,p.useState)(!0),I=j[0],E=j[1],O=(0,l.s4)(),L=(0,p.useRef)(),M=(0,l.RO)(L,u.sw),R=(0,p.useState)((function(){return"text"===b})),N=R[0],P=R[1],F=(0,p.useCallback)((function(n){var t=n.id,e=n.ref;return function(){T(t),e.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}}),[]);(0,p.useEffect)((function(){if(Z.current){var n=Z.current,t=n.offsetWidth,e=n.childNodes,r=0;e.forEach((function(n){r+=n.offsetWidth})),E(!(r<=t))}}),[S.length]);var A=C[w],D=S&&S.length>1;return A?(0,r.jsxs)(s.TZ,{children:[D&&(0,r.jsx)(s.dr,(0,c.Z)((0,i.Z)({ref:Z,isVisible:O.current,isOverflow:I,backgroundColor:o},(0,f.OE)("container","product_tab_list_".concat(b),-1,"Danh s\xe1ch Tab",{type:h,row:v,tabTitleType:b},"product_tab_list")),{children:S.map((function(n,t){var e=C[n],o=w===e.id,l=(0,p.createRef)();return(0,r.jsxs)(s.E2,(0,c.Z)((0,i.Z)({ref:l,selected:o,color:a||e.color,onClick:F({id:e.id,ref:l})},(0,f.OE)("item","product_tab_".concat(e.id),t,e.tabTitleContent,null,"product_tab_button")),{tabTitleType:b,isVisible:N,children:["text"===b?(0,r.jsx)("span",{className:"tab-name",children:e.tabTitleContent}):(0,r.jsx)("div",{className:"tab-img",children:(0,r.jsx)(d.Z,{src:(0,g.resizeImageHasCache)(e.tabTitleContent,564),alt:"tab-title-img-".concat(e.id),ratio:1/3,dominantColor:"transparent",allowFade:!1,allowResponsive:!1,onLoad:function(){return 0===t&&P(!0)},extraSource:(0,g.getWebpSource)(e.tabTitleContent,350)})}),(0,r.jsx)("div",{className:"tab-indicator"})]}),e.id)}))})),(0,r.jsx)("div",(0,c.Z)((0,i.Z)({},(0,f.OE)("container","product_tab_".concat(w,"_container"),-1,A.tabTitleContent,null,"product_tab_item_list")),{ref:L,children:(0,r.jsx)(k,{showTabsHeader:D,generalSettings:m,tabSource:A,widgetId:e,onScreen:M},A.id)}))]}):null},Z=function(n){var t=n.widget,e=t.payload,i=t.id;return(0,r.jsx)(a.Z,{backgroundColor:e.backgroundColor,children:(0,r.jsx)(o.Z,{children:(0,r.jsx)(T,{productPayload:e,id:i})})})}},74233:function(n,t,e){e.d(t,{E2:function(){return s},TZ:function(){return l},dr:function(){return u}});var r=e(19989),o=e(94822);function a(){var n=(0,r.Z)([""]);return a=function(){return n},n}function i(){var n=(0,r.Z)(["\n  display: flex;\n  overflow-x: scroll;\n\n  /* prevent accidentally going back or triggering other swipe events */\n  overscroll-behavior: contain;\n\n  /* hide scroll bar */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n\n  /* momentum scroll on iOS */\n  -webkit-overflow-scrolling: touch;\n\n  /* disable vertical scroll for touch */\n  touch-action: pan-x;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  list-style: none;\n  padding: 0;\n  margin: 0;\n\n  justify-content: ",";\n  background: ",";\n  opacity: ",";\n  transition: opacity 0.3s ease-out;\n"]);return i=function(){return n},n}function c(){var n=(0,r.Z)(["\n  height: 134px;\n  flex-shrink: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ",";\n  padding: ",";\n\n  position: relative;\n  flex: 1;\n  line-height: 32px;\n  cursor: pointer;\n  opacity: ",";\n\n  &:hover {\n    & .tab-name {\n      opacity: 1;\n    }\n  }\n\n  & .tab-name {\n    opacity: ",";\n    font-size: 24px;\n  }\n\n  & .tab-img {\n    opacity: ",";\n    width: 282px;\n    height: 94px;\n  }\n\n  & .tab-indicator {\n    position: absolute;\n    width: 71px;\n    height: 8px;\n    border-radius: 6px;\n    background: ",";\n    bottom: ",";\n\n    opacity: ",";\n    transition: all 0.3s ease-out;\n  }\n"]);return c=function(){return n},n}var l=o.default.div.withConfig({componentId:"sc-23f28801-0"})(a()),u=o.default.ul.withConfig({componentId:"sc-23f28801-1"})(i(),(function(n){return n.isOverflow?"start":"center"}),(function(n){return n.backgroundColor}),(function(n){return n.isVisible?1:0})),s=o.default.li.withConfig({componentId:"sc-23f28801-2"})(c(),(function(n){return n.color}),(function(n){return"text"===n.tabTitleType?"16px 12px 22px 12px":"16px 14px 24px 14px"}),(function(n){return n.isVisible?1:0}),(function(n){return n.selected?1:.6}),(function(n){return n.selected?1:.6}),(function(n){return n.color}),(function(n){return"text"===n.tabTitleType?"22px":"0px"}),(function(n){return n.selected?1:0}))}}]);